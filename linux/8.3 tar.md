## tar:解压、压缩命令

### 1.命令基本用法
tar 命令既可以压缩，又可解压，同时可在tar的基础上进行gzip bzip2 xz的再次压缩；因此支持
后缀名为: *.tar *.tar.gz *.tar.bz2 *.tar.xz 的文件

```
[dmtsai@study ~]$ tar [-z|-j|-J] [cv] [-f 待建立的新文件名] filename... <==打包与压缩
[dmtsai@study ~]$ tar [-z|-j|-J] [tv] [-f 既有的 tar 檔名 ] <==查看文件名
[dmtsai@study ~]$ tar [-z|-j|-J] [xv] [-f 既有的 tar 檔名 ] [-C目录 ] <==解压缩
```

###### 选项与参数，可分为三组：

a.压缩(-c)、解压(-x)、查看命令(-t)
```
-c ：建立打包文件，可搭配 -v 来察看过程中被打包的档名(filename)
-t ：察看打包文件的内容含有哪些档名，重点在察看『档名』就是了；
-x ：解打包或解压缩的功能，可以搭配 -C (大写) 在特定目录解开
特别留意的是， -c, -t, -x 不可同时出现在一串指令列中。
```

b. 各种格式的再压缩；gzip(-z)、bzip(-j)、xz(-J)
```
-z ：透过 gzip 的支持进行压缩/解压缩：此时档名最好为 *.tar.gz
-j ：透过 bzip2 的支持进行压缩/解压缩：此时档名最好为 *.tar.bz2
-J ：透过 xz 的支持进行压缩/解压缩：此时档名最好为 *.tar.xz
特别留意， -z, -j, -J 不可以同时出现在一串指令列中
```

c.杂项
```
-v ：在压缩/解压缩的过程中，将正在处理的文件名显示出来！
-f filename：-f 后面要立刻接要被处理的档名！建议 -f 单独写一个选项啰！(比较不会忘记)
-C 目录 ：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项
```

### 2.查看文件档名

要查看由 tar 所建立的压缩文件内部的文件名，重点在于使用-t参数：
```
[root@study ~]# tar -jtv -f /root/etc.tar.bz2
```

###### 我们可以发现文件名是没有根目录的，也就是说文件名存储的是相对路径。以便可以方便的解压在任何目录中。

 在 tar 所记录的文件名 (就是我们刚刚使用 tar -jtvf 所察看到的檔名)那就是解压缩后的实际档名。 如果拿掉了根目录，假设你将备份数据在 /tmp 解开，**那么解压缩的档名就会变成『/tmp/etc/xxx**』。但『如果没有拿掉根目录，解压缩后的档名就会是绝对路径， 亦即解压缩后的数据一定会被放置到 /etc/xxx 去！』，**原本存在/etc目录下的文件就回被替换；**
 
++在压缩的时候添加-P参数可保持文件的绝对路径。++

### 3.只解压其中一个文件
步骤是：1.首先获取你想要解压出的那个文件的文件名，然后在进行解压，命令如下：
```
[root@study ~]# tar -jtv -f /root/etc.tar.bz2 | grep 'shadow'
```
```
[root@study ~]# tar -jxv -f *.tar.bz2 待解压的文件名
```
注意文件名写相对路径。


